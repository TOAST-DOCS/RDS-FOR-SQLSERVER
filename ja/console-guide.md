## Database > RDS for MS-SQL > コンソール使用ガイド

## DBインスタンス

DBインスタンスタブではDBインスタンスの作成、修正、削除などの作業を行ったり、作成されたDBインスタンスの各種状態情報を照会できます。

### DBインスタンス作成

DBインスタンスを作成するには、先にDBインスタンスリスト画面左上の**DBインスタンス作成**ボタンを押して、DBインスタンス作成画面へ移動します。
作成したいDBインスタンスの仕様、情報、ネットワーク、Floating IP、DBセキュリティグループ、バックアップ設定を入力した後、**DBインスタンス作成**ボタンを押してDBインスタンス作成リクエストを行います。

![DBインスタンス作成001](https://static.toastoven.net/prod_rds_mssql/20220614/db_instance_create_001_kr.png)

* ❶ Compute & Networkサービスで作成したVPCサブネットを選択できます。
* ❷ DBセキュリティグループがない場合、**DBセキュリティグループ作成**ボタンを押して即時に作成し、適用できます。
* その他詳細については[DBインスタンス](./db-instance)と[データベース接続](./database-connection)を参照してください。

DBインスタンス作成リクエストが成功すると、自動的にDBインスタンスリストへ移動します。DBインスタンスの作成には数分から数十分かかります。

### DBインスタンスリスト

DBインスタンスの簡略な情報リストを照会できます。
1画面に最大50個のDBインスタンスリストが表示されます。

![DBインスタンスリスト001](https://static.toastoven.net/prod_rds_mssql/20220614/db_instance_list_001.png)

* ❶ DBインスタンス名およびUUIDで検索できます。
* ❷条件ボタンを押すと、アベイラビリティゾーンとDBインスタンス状態で検索結果をフィルタリングできます。

![DBインスタンスリスト > 条件001](https://static.toastoven.net/prod_rds_mssql/20220315/db_instance_list_cond_001_kr.png)

* ❸ 頻繁に使用する作業を実行できます。
* ❹ 頻繁に使用しない追加作業を実行できます。
* ❺現在のリストを更新するか、50個以上のDBインスタンスがある場合、ページを移動できます。
* ❻ハイパーバイザメンテナンス対象のときはボタンが表示されます。マイグレーション方法は付録1をご確認ください。
* ❼パラメータグループが変更されたが適用されていないときにボタンが表示されます。ボタンをクリックしてパラメータを適用できます。
* ❽現在のCPU使用量とアクティブセッション数を表します。値は1分毎に更新されます。
* ❾ DBインスタンスの状態を表します。状態に応じて異なる状態値と色が表示されます。DBインスタンスが作業中の場合は歯車が表示されます。

### DBインスタンス再起動

DBインスタンスのMicrosoft SQL Serverプロセスを再起動できます。 DBインスタンスが高可用性構成を使用すると、フェイルオーバーを利用して再起動できます。

![DBインスタンスリスト > 再起動001](https://static.toastoven.net/prod_rds_mssql/20201215/bordered/db_instance_restart_001_kr.png)

* ❶ DBインスタンスを再起動すると、Microsoft SQL Serverプロセスを再起動します。もしMicrosoft SQL Serverプロセスの再起動に失敗したら、DBインスタンスVMが再起動します。
* ❷高可用性機能を使用する場合、フェイルオーバーを利用して再起動する場合もあります。

### DBインスタンス強制再起動

DBインスタンスの状態が異常と判断された場合、現在進行中の作業に関係なく強制的に再起動できます。

![DBインスタンス強制再起動001](https://static.toastoven.net/prod_rds_mssql/20210713/output/db_instance_force_restart_001.png)

* ❶ DBインスタンスを選択した後、 **強制再起動** ボタンをクリックすると**強制再起動**確認ウィンドウが表示されます。

![DBインスタンス強制再起動002](https://static.toastoven.net/prod_rds_mssql/20210713/output/db_instance_force_restart_002.png)

* ❷  **強制再起動**ボタンをクリックするとDBインスタンスが強制再起動されます。

> [注意]
> 強制再起動を行う場合、現在作業中のすべての作業が失われます。動作中のVMが再起動します。
> 強制再起動後、DBインスタンスの状態が正常に戻らない場合があります。その場合はサポートへお問い合わせください。

### DBインスタンス修正

使用可能状態のDBインスタンスは、Webコンソールから簡単に主な設定を変更でます。

![DBインスタンスリスト002](https://static.toastoven.net/prod_rds_mssql/20220315/db_instance_list_002_kr.png)

* ❶修正したいDBインスタンスをリストから選択して、左上の修正ボタンを押します。

変更したい設定を変更後、ページ下の**修正**ボタンを押してDBインスタンスを修正します。
DBインスタンス修正リクエストが成功すると、自動的にDBインスタンスリストへ移動します。DBインスタンスの修正は数分から数十分かかります。

![DBインスタンス修正001](https://static.toastoven.net/prod_rds_mssql/20220614/db_instance_modify_001_kr.png)

* ❶アベイラビリティゾーンは変更できません。
* ❷ DBインスタンスタイプ変更時、データベースが再起動します。
* ❸ストレージタイプは変更できません。
* ❹一度増やしたストレージサイズは減らせません。
* ❺バックアップ保管期間が1日以上の時のみ、高可用性機能を使用できます。
* ❻高可用性自動復旧を使用すると、自動フェイルオーバーの1時間後に動作する高可用性復旧予約タスクが作成されます。
* ❼ユーザーIDは変更できません。
* ❽パスワードを入力していない場合は、変更されません。
* ❾ポート変更時、データベースが再起動します。
* ❿VPCは変更できません。
* ⓫タスク予約時間を修正すると、作成済みの予約タスクの予約時間も変更されます。
* ⓬ **DBインスタンス修正**ボタンをクリックすると、DBインスタンス修正確認ウィンドウが表示されます。
    ![DBインスタンス修正 > 確認モーダル](https://static.toastoven.net/prod_rds_mssql/20220315/db_instance_modify_modal_001_kr.png)
    * **即時実行**ボタンをクリックするとすぐに変更されます。
    * **タスク予約**ボタンをクリックすると、DBインスタンスタスク予約時間にタスクが予約されます。

### DBインスタンス詳細

DBインスタンスを選択すると、画面下に詳細表示パネルが表示され、さらに詳細な情報を確認できます。
詳細表示パネルは5つのタブで構成されていて、DBインスタンスに関連した追加情報を確認できます。

#### 基本情報

選択したDBインスタンスの基本情報を確認できます。

![DBインスタンス詳細 > 基本情報001](https://static.toastoven.net/prod_rds_mssql/20220315/db_instance_detail_inst_001_kr.png)

* ❶ **変更**ボタンを押すと、DBインスタンスの名前を変更できます。
* ❷ **コピー**ボタンを押すと、DBインスタンスのIDをクリップボードにコピーします。
* ❸ DBインスタンスに接続できるドメインが表示されます。ドメインをクリックすると、ドメインのタイプとIP情報が表示されます。

![DBインスタンス詳細 > 基本情報001ドメイン](https://static.toastoven.net/prod_rds_mssql/20201215/bordered/db_instance_detail_inst_001_domain_kr.png)

* ❹ **コピー**ボタンを押すと、ドメイン情報をクリップボードにコピーします。
* ❺高可用性DBインスタンスのデータベース複製状態を表示します。
    * データベース作成後、Webコンソールに表示されるまで一定時間かかります。
    * `複製済`状態ではないデータベースは自動フェイルオーバーが行われません。
* ❻適用されたDBセキュリティグループを確認できます。DBセキュリティグループ名の上にマウスオーバーすると、セキュリティグループルールが表示されます。

![DBインスタンス詳細 > 基本情報001セキュリティルール](https://static.toastoven.net/prod_rds_mssql/20220614/db_instance_detail_inst_001_dsg_kr.png)

#### モニタリング

選択したDBインスタンスに関連する指標をチャートで確認できます。詳細な使用方法は[サーバーダッシュボード](./console-guide#_20)を参照してください。

![DBインスタンス詳細 > モニタリング001](https://static.toastoven.net/prod_rds_mssql/db_instance_detail_mon_001.png)

#### イベント

選択したDBインスタンスに関連するイベントを確認できます。詳細な使用方法は[イベント](./console-guide#_12)を参照してください。

![DBインスタンス詳細 > イベント001](https://static.toastoven.net/prod_rds_mssql/20220315/db_instance_detail_event_001.png)

#### ログ

選択したDBインスタンスで発生したMicrosoft SQL Serverのエラーログを確認できます。
エラーログの内容を新しい順にソートし、1画面で最大10行のエラーログを確認できます。

![DBインスタンス詳細 > ログ001](https://static.toastoven.net/prod_rds_mssql/20220914/db_instance_detail_log_001.png)

* ❶照会期間を選択します。別途指定しなければ直近一週間のエラーログを照会します。
* ❷ **ログ表示**ボタンをクリックすると、そのログファイルの最近のログを確認できます。

![DBインスタンス詳細 > ログ002](https://static.toastoven.net/prod_rds_mssql/20220914/db_instance_detail_log_002.png)

* ❶ **すべてのログ表示**ボタンをクリックすると、照会期間内のすべてのログを無限スクロール方式で確認できます。
