## Database > RDS for MS-SQL > データベース接続

DBインスタンスのOSに直接アクセスできません。DBインスタンス作成時、入力したポートを通してデータベースからアクセスできます。

## ドメイン

DBインスタンスを作成すると、VPCサブネットを通して接続できる内部ドメインが発行されます。Floating IPを使用すると外部から接続できる外部ドメインが追加で発行されます。
ドメインは`xxxx.yyyy.kr1.mssql.rds.nhncloudservice.com`で構成されます。 `xxxx`には32文字の任意の文字列が入り、`yyyy`にはドメインタイプに応じて内部ドメインの場合は`internal`、外部ドメインの場合は`external`が入ります。

> [注意]
> これまで使用していた`xxxx.yyyy.sqlserver.rds.cloud.toast.com`ドメインは2022年8月31日に削除される予定です。
> 使用中のドメインを`xxxx.yyyy.kr1.mssql.rds.nhncloudservice.com`に変更してください。


## データベースポート

1150～65535の任意のポートをデータベースのポートに指定できます。

> [注意]
> Windowsサーバーのカーネル、サービス、ソフトウェアが使用するポートを指定する場合、データベースが正常に動作しない場合があります。
> 作成済のDBインスタンスのデータベースのポートを変更すると、データベースが再起動します。
> ユーザーが使用中のISPで、セキュリティのためによく知られているポートをブロックすることがあります。NHN CloudのRDSに接続できない場合もあり、その場合はポート番号を変更する必要があります。

## VPCサブネット

DBインスタンスは、作成時にユーザーのCompute & NetworkサービスのVPCサブネットを選択する必要があります。
同じVPCサブネットにあるDBインスタンスとCompute & Networkサービスのインスタンスの間ではネットワーク接続が有効になります。
DBインスタンスは、ユーザーのVPCサブネット以外の外部ネットワークと遮断されています。外部から接続したい場合はFloating IPを使用する必要があります。

## DBセキュリティグループ

DBセキュリティグループは、DBインスタンスを他のトラフィックから保護するために使用します。指定したトラフィックを許可し、他のトラフィックは遮断する「ポジティブセキュリティモデル(positive security model)」を使用します。 
初めてサービスを開始すると、基本セキュリティグループが1つ作成され、流入するすべてのトラフィックを遮断します。したがって、Floating IPを使用しているからといって、すぐに接続することはできません。必要なポリシーを設定すると接続できます。
DBセキュリティグループは、Floating IPを使用した外部アクセスと、プライベートIPを使用した内部アクセスのどちらにも同じように適用されます。
DBインスタンスには複数のセキュリティグループを設定できます。セキュリティグループを作成し、複数のポリシーを追加してこれをインスタンスに設定すると、設定されたすべてのセキュリティグループのポリシーがインスタンスに適用されます。

| 項目     | 説明                                                      |
| ----------- | ------------------------------------------------------------ |
| 方向     | 受信はインスタンスへの流入を意味します。送信はインスタンスから出る方向を意味します。 |
| Ether Type  | EtherType IPのバージョンを意味します。IPv4、IPv6を指定できます。 |
| 遠隔     | IPアドレスの範囲を指定できます。ルールの方向が「送信」の場合、宛先が遠隔で、「受信」の場合は出発地が遠隔です。<br>ポリシーの方向に応じてトラフィックの出発地または宛先がIPアドレスまたは範囲かを比較します。 |
| 説明     | セキュリティグループポリシーの説明を追加できます。         |

DBセキュリティグループのポートはデータベースのポートに固定され、データベースのポートを変更すると、DBセキュリティグループのポリシーも自動的に変更されて適用されます。
DBセキュリティグループの方向は受信のみ設定できます。
